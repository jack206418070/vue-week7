{"version":3,"file":"js/1.52f3188e.js","mappings":"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","sources":["webpack://vue-week6/./src/views/PayView2.vue","webpack://vue-week6/./node_modules/@heroicons/vue/outline/esm/CreditCardIcon.js","webpack://vue-week6/./node_modules/@heroicons/vue/outline/esm/CashIcon.js","webpack://vue-week6/./src/views/PayView2.vue?f32a"],"sourcesContent":["<template>\n  <LoadingView :active=\"isLoading\"></LoadingView>\n  <div v-show=\"is_show\" class=\"userInfo mb-10\">\n    <h3 class=\"text-medium py-4 px-5 mb-10\">訂購資料</h3>\n    <FormView v-slot=\"{ errors }\" @submit=\"onSubmit\" class=\"px-5\">\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <div class=\"form-control mb-2\">\n            <label for=\"name\" class=\"mb-1\">\n              訂購人\n              <ErrorMessage name=\"name\" class=\"invalid-feedback\"></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"name\"\n              name=\"name\"\n              type=\"text\"\n              class=\"form-input\"\n              :class=\"{ 'is-invalid': errors['name'] }\"\n              placeholder=\"請輸入 姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"email\" class=\"mb-1\">\n              信箱\n              <ErrorMessage\n                name=\"email\"\n                class=\"invalid-feedback\"\n              ></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"region\" class=\"mb-1\">\n              地區選擇\n              <ErrorMessage\n                name=\"address\"\n                class=\"invalid-feedback\"\n              ></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"address\"\n              name=\"address\"\n              :class=\"{ 'is-invalid': errors['address'] }\"\n              placeholder=\"請輸入地區\"\n              rules=\"required\"\n              as=\"select\"\n              v-model=\"form.user.address\"\n            >\n              <option value=\"\">請選擇地區</option>\n              <option value=\"台北市\">台北市</option>\n              <option value=\"高雄市\">高雄市</option>\n            </FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"phone\" class=\"mb-1\">\n              電話\n              <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"phone\"\n              name=\"電話\"\n              type=\"text\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              :rules=\"isPhone\"\n              v-model=\"form.user.tel\"\n            ></FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"message\" class=\"mb-1\">留言</label>\n            <FieldView\n              id=\"message\"\n              name=\"message\"\n              type=\"text\"\n              v-model=\"form.message\"\n              as=\"textarea\"\n            ></FieldView>\n          </div>\n        </div>\n        <div class=\"col-lg-6 mt-7\">\n          <div class=\"row\">\n            <div class=\"col-lg-6\">\n              <div\n                class=\"pay_credit\"\n                :class=\"{ active: is_credit == true }\"\n                @click=\"is_credit = true\"\n              >\n                <span>信用卡付款</span>\n                <span class=\"icon\">\n                  <CreditCardIcon></CreditCardIcon>\n                </span>\n              </div>\n            </div>\n            <div class=\"col-lg-6\">\n              <div\n                class=\"pay_cash\"\n                :class=\"{ active: is_credit == false }\"\n                @click=\"is_credit = false\"\n              >\n                <span>現金付款</span>\n                <span class=\"icon\">\n                  <CashIcon></CashIcon>\n                </span>\n              </div>\n            </div>\n            <div class=\"col-lg-12\">\n              <button\n                class=\"user-btn user-btn-primary w-100 py-4 mb-0 mt-auto f-size-xs\"\n                type=\"submit\"\n              >\n                下一步：完成付款\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </FormView>\n  </div>\n</template>\n\n<script>\nimport { CreditCardIcon, CashIcon } from '@heroicons/vue/outline'\nexport default {\n  props: ['show'],\n  data () {\n    return {\n      is_credit: false,\n      isLoading: false,\n      is_show: false,\n      form: {\n        user: {}\n      }\n    }\n  },\n  components: {\n    CreditCardIcon,\n    CashIcon\n  },\n  methods: {\n    onSubmit () {\n      this.isLoading = true\n      const order = this.form\n      this.$http\n        .post(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/order`, { data: order })\n        .then((res) => {\n          if (this.is_credit) {\n            this.payOrder(res.data.orderId)\n            return\n          }\n          this.isLoading = false\n          this.$emitter.emit('updateCart', false)\n          this.$router.push({ name: '完成結帳頁面', params: { show_complete: true } })\n        })\n        .catch((err) => {\n          console.dir(err)\n          alert('結帳失敗, 請確認資料正確性')\n        })\n    },\n    payOrder (orderId) {\n      this.$http\n        .post(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/pay/${orderId}`)\n        .then((res) => {\n          this.isLoading = false\n          this.$router.push({ name: '完成結帳頁面', params: { show_complete: true } })\n          this.$emitter.emit('updateCart', false)\n        })\n        .catch((err) => {\n          console.dir(err)\n        })\n    },\n    isPhone (value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼'\n    }\n  },\n  beforeCreate () {\n  },\n  mounted () {\n    if (this.show) {\n      this.is_show = true\n      this.$emitter.emit('changeBar', 2)\n    } else {\n      this.$router.push('/cart')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.userInfo {\n  h3 {\n    background-color: #f5f5f5;\n    font-size: 20px;\n    border-top: 1px solid #ccc;\n    border-bottom: 1px solid #ccc;\n  }\n  form {\n    label {\n      display: block;\n      font-weight: 400;\n      letter-spacing: 1.3px;\n    }\n    input,\n    select,\n    textarea {\n      padding: 4px 12px;\n      font-size: 18px;\n      width: 100%;\n    }\n    textarea {\n      min-height: 200px;\n    }\n  }\n  .is-invalid {\n    border: 1px solid red;\n  }\n  .invalid-feedback {\n    color: red;\n    font-weight: 400;\n  }\n  .pay_credit,\n  .pay_cash {\n    border: 1px solid #ccc;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 30px;\n    border-radius: 10px;\n    cursor: pointer;\n    margin-bottom: 30px;\n    transition: 0.7s;\n    span {\n      text-align: center;\n      margin: 0 4px;\n    }\n    &:hover,\n    &.active {\n      border: 1px solid $primary;\n      background-color: $primary;\n      color: white;\n    }\n  }\n  .icon {\n    display: block;\n    width: 40px;\n    height: 40px;\n  }\n}\n</style>\n","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    \"stroke-width\": \"2\",\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, [\n    _createVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      d: \"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"\n    })\n  ]))\n}","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    \"stroke-width\": \"2\",\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, [\n    _createVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      d: \"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"\n    })\n  ]))\n}","import { render } from \"./PayView2.vue?vue&type=template&id=6962f1ba&scoped=true\"\nimport script from \"./PayView2.vue?vue&type=script&lang=js\"\nexport * from \"./PayView2.vue?vue&type=script&lang=js\"\n\nimport \"./PayView2.vue?vue&type=style&index=0&id=6962f1ba&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/ginjack/Desktop/vue-week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6962f1ba\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","value","type","_createVNode","_component_LoadingView","active","$data","_hoisted_2","_component_FormView","onSubmit","$options","errors","_component_ErrorMessage","name","_component_FieldView","id","placeholder","rules","user","$event","email","as","address","_hoisted_14","_hoisted_15","_hoisted_16","tel","_hoisted_21","message","onClick","_hoisted_25","_component_CreditCardIcon","_hoisted_28","_component_CashIcon","_hoisted_30","render","_ctx","_cache","_openBlock","_createBlock","xmlns","fill","viewBox","stroke","d","props","data","is_credit","isLoading","is_show","form","components","CreditCardIcon","CashIcon","methods","this","order","$http","post","then","res","payOrder","orderId","$emitter","emit","$router","push","params","show_complete","catch","err","console","dir","alert","isPhone","phoneNumber","test","beforeCreate","mounted","show","__exports__"],"sourceRoot":""}