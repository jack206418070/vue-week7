"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[1],{4001:function(e,s,a){a.r(s),a.d(s,{default:function(){return Y}});var l=a(3396),o=a(7139),i=a(9242);const r=e=>((0,l.dD)("data-v-6962f1ba"),e=e(),(0,l.Cn)(),e),t={class:"userInfo mb-10"},n=r((()=>(0,l._)("h3",{class:"text-medium py-4 px-5 mb-10"},"訂購資料",-1))),d={class:"row"},m={class:"col-lg-6"},c={class:"form-control mb-2"},u={for:"name",class:"mb-1"},p=(0,l.Uk)(" 訂購人 "),h={class:"form-control mb-2"},_={for:"email",class:"mb-1"},v=(0,l.Uk)(" 信箱 "),f={class:"form-control mb-2"},b={for:"region",class:"mb-1"},w=(0,l.Uk)(" 地區選擇 "),g=r((()=>(0,l._)("option",{value:""},"請選擇地區",-1))),k=r((()=>(0,l._)("option",{value:"台北市"},"台北市",-1))),C=r((()=>(0,l._)("option",{value:"高雄市"},"高雄市",-1))),V={class:"form-control mb-2"},W={for:"phone",class:"mb-1"},x=(0,l.Uk)(" 電話 "),y={class:"form-control mb-2"},$=r((()=>(0,l._)("label",{for:"message",class:"mb-1"},"留言",-1))),U={class:"col-lg-6 mt-7"},I={class:"row"},j={class:"col-lg-6"},L=r((()=>(0,l._)("span",null,"信用卡付款",-1))),z={class:"icon"},H={class:"col-lg-6"},M=r((()=>(0,l._)("span",null,"現金付款",-1))),S={class:"icon"},q=r((()=>(0,l._)("div",{class:"col-lg-12"},[(0,l._)("button",{class:"user-btn user-btn-primary w-100 py-4 mb-0 mt-auto f-size-xs",type:"submit"}," 下一步：完成付款 ")],-1)));function B(e,s,a,r,B,F){const D=(0,l.up)("LoadingView"),E=(0,l.up)("ErrorMessage"),O=(0,l.up)("FieldView"),P=(0,l.up)("CreditCardIcon"),Y=(0,l.up)("CashIcon"),Z=(0,l.up)("FormView");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(D,{active:B.isLoading},null,8,["active"]),(0,l.wy)((0,l._)("div",t,[n,(0,l.Wm)(Z,{onSubmit:F.onSubmit,class:"px-5"},{default:(0,l.w5)((({errors:e})=>[(0,l._)("div",d,[(0,l._)("div",m,[(0,l._)("div",c,[(0,l._)("label",u,[p,(0,l.Wm)(E,{name:"name",class:"invalid-feedback"})]),(0,l.Wm)(O,{id:"name",name:"name",type:"text",class:(0,o.C_)(["form-input",{"is-invalid":e["name"]}]),placeholder:"請輸入 姓名",rules:"required",modelValue:B.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>B.form.user.name=e)},null,8,["class","modelValue"])]),(0,l._)("div",h,[(0,l._)("label",_,[v,(0,l.Wm)(E,{name:"email",class:"invalid-feedback"})]),(0,l.Wm)(O,{id:"email",name:"email",type:"email",class:(0,o.C_)(["form-input",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:B.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=e=>B.form.user.email=e)},null,8,["class","modelValue"])]),(0,l._)("div",f,[(0,l._)("label",b,[w,(0,l.Wm)(E,{name:"address",class:"invalid-feedback"})]),(0,l.Wm)(O,{id:"address",name:"address",class:(0,o.C_)({"is-invalid":e["address"]}),placeholder:"請輸入地區",rules:"required",as:"select",modelValue:B.form.user.address,"onUpdate:modelValue":s[2]||(s[2]=e=>B.form.user.address=e)},{default:(0,l.w5)((()=>[g,k,C])),_:2},1032,["class","modelValue"])]),(0,l._)("div",V,[(0,l._)("label",W,[x,(0,l.Wm)(E,{name:"電話",class:"invalid-feedback"})]),(0,l.Wm)(O,{id:"phone",name:"電話",type:"text",class:(0,o.C_)({"is-invalid":e["電話"]}),placeholder:"請輸入電話",rules:F.isPhone,modelValue:B.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=e=>B.form.user.tel=e)},null,8,["class","rules","modelValue"])]),(0,l._)("div",y,[$,(0,l.Wm)(O,{id:"message",name:"message",type:"text",modelValue:B.form.message,"onUpdate:modelValue":s[4]||(s[4]=e=>B.form.message=e),as:"textarea"},null,8,["modelValue"])])]),(0,l._)("div",U,[(0,l._)("div",I,[(0,l._)("div",j,[(0,l._)("div",{class:(0,o.C_)(["pay_credit",{active:1==B.is_credit}]),onClick:s[5]||(s[5]=e=>B.is_credit=!0)},[L,(0,l._)("span",z,[(0,l.Wm)(P)])],2)]),(0,l._)("div",H,[(0,l._)("div",{class:(0,o.C_)(["pay_cash",{active:0==B.is_credit}]),onClick:s[6]||(s[6]=e=>B.is_credit=!1)},[M,(0,l._)("span",S,[(0,l.Wm)(Y)])],2)]),q])])])])),_:1},8,["onSubmit"])],512),[[i.F8,B.is_show]])],64)}function F(e,s){return(0,l.wg)(),(0,l.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[(0,l.Wm)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])}function D(e,s){return(0,l.wg)(),(0,l.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[(0,l.Wm)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])}var E={props:["show"],data(){return{is_credit:!1,isLoading:!1,is_show:!1,form:{user:{}}}},components:{CreditCardIcon:F,CashIcon:D},methods:{onSubmit(){this.isLoading=!0;const e=this.form;this.$http.post("https://vue3-course-api.hexschool.io/v2/api/ginjack/order",{data:e}).then((e=>{this.is_credit?this.payOrder(e.data.orderId):(this.isLoading=!1,this.$emitter.emit("updateCart",!1),this.$router.push({name:"完成結帳頁面",params:{show_complete:!0}}))})).catch((e=>{console.dir(e),alert("結帳失敗, 請確認資料正確性")}))},payOrder(e){this.$http.post(`https://vue3-course-api.hexschool.io/v2/api/ginjack/pay/${e}`).then((e=>{this.isLoading=!1,this.$router.push({name:"完成結帳頁面",params:{show_complete:!0}}),this.$emitter.emit("updateCart",!1)})).catch((e=>{console.dir(e)}))},isPhone(e){const s=/^(09)[0-9]{8}$/;return!!s.test(e)||"需要正確的電話號碼"}},beforeCreate(){},mounted(){this.show?(this.is_show=!0,this.$emitter.emit("changeBar",2)):this.$router.push("/cart")}},O=a(89);const P=(0,O.Z)(E,[["render",B],["__scopeId","data-v-6962f1ba"]]);var Y=P}}]);
//# sourceMappingURL=1.52f3188e.js.map