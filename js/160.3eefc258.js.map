{"version":3,"file":"js/160.3eefc258.js","mappings":"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","sources":["webpack://vue-week6/./src/views/PayView1.vue","webpack://vue-week6/./src/views/PayView1.vue?5bd9"],"sourcesContent":["<template>\n  <LoadingView :active=\"isLoading\"></LoadingView>\n  <ul v-if=\"carts?.carts?.length\" class=\"mb-10\">\n    <li class=\"row py-4 bg-secondary\">\n      <div class=\"col-lg-4\">\n        <p class=\"text-center text-c-white\">商品</p>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-center text-c-white\">數量</p>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-center text-c-white\">售價</p>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-center text-c-white\">小計</p>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-center text-c-white\">操作</p>\n      </div>\n    </li>\n    <li\n      class=\"row py-4 bg-white align-items-center border-b-1\"\n      v-for=\"item in carts.carts\"\n      :key=\"item.id\"\n    >\n      <div class=\"col-lg-4 d-flex jy-content-center\">\n        <div\n          class=\"img-bg px-1\"\n          :style=\"{ backgroundImage: 'url(' + item.product.imageUrl + ')' }\"\n        ></div>\n        <div class=\"content px-3\">\n          <h3 class=\"text-medium\">{{ item.product.title }}</h3>\n          <p>\n            規格：{{ item.product.unit }}<br />\n            重量：{{ item.product.content }}\n          </p>\n        </div>\n      </div>\n      <div class=\"col-lg-2\">\n        <select\n          class=\"py-2\"\n          name=\"qty\"\n          id=\"qty\"\n          v-model=\"item.qty\"\n          @change=\"updateCart(item, item.qty)\"\n        >\n          <option v-for=\"(qty, key) in 20\" :key=\"qty + key\" :value=\"qty\">\n            {{ qty }}\n          </option>\n        </select>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-medium text-center text-c-primary\">\n          NT ${{ item.product.price }}\n        </p>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-medium text-center text-c-primary\">\n          NT ${{ item.total }}\n        </p>\n      </div>\n      <div class=\"col-lg-2\">\n        <button\n          type=\"button\"\n          class=\"user-btn user-btn-primary m-auto py-1 px-2\"\n          @click=\"deleteCart(item.id)\"\n        >\n          <span class=\"text-c-white\"> X </span>\n        </button>\n      </div>\n    </li>\n    <li class=\"row py-4 bg-white align-items-center border-b-1 jy-content-end\">\n      <div class=\"col-lg-2\">\n        <p class=\"text-medium text-center text-c-primary\">總計</p>\n      </div>\n      <div class=\"col-lg-2\">\n        <p class=\"text-medium text-center text-c-primary f-size-s\">\n          NT ${{ carts.total }}\n        </p>\n      </div>\n    </li>\n    <li class=\"row py-6 bg-white jy-content-between\">\n      <div class=\"col-lg-4 d-flex flex-dir-col jy-content-between\">\n        <div class=\"coupon d-flex\">\n          <input\n            class=\"w-60 p-2 f-size-xs\" type=\"text\" id=\"coupon\"\n            v-model=\"coupon\"\n            :readonly=\"carts.total !== carts.final_total\"\n          >\n          <button\n            class=\"user-btn user-btn-primary py-2 flex-auto\"\n            type=\"button\"\n            @click=\"useCoupon\"\n            :disabled=\"carts.total !== carts.final_total\"\n          >\n            <span v-if=\"carts.total == carts.final_total\">使用優惠卷</span>\n            <span v-else>已使用過優惠卷</span>\n          </button>\n        </div>\n        <p class=\"text-medium d-flex jy-content-between\">\n          <span>商品小計</span>\n          <span class=\"text-c-primary f-w-bold\">NT$ {{ carts.total }}</span>\n        </p>\n        <p class=\"text-medium d-flex jy-content-between\">\n          <span>優惠折扣</span>\n          <span class=\"text-c-primary f-w-bold\">\n            NT$ {{ Math.round(carts.total - carts.final_total) }}\n          </span>\n        </p>\n      </div>\n      <div class=\"col-lg-4\">\n        <p>\n          結帳金額<br>\n          <span class=\"text-c-primary f-size-s f-w-bold my-2 d-block\">\n            NT$ {{ Math.round(carts.final_total) }}\n          </span>\n        </p>\n        <button\n          class=\"user-btn user-btn-primary w-100 py-3 f-size-xs\" type=\"button\"\n          @click=\"routerTo\"\n        >下一步：填寫資料</button>\n      </div>\n    </li>\n  </ul>\n  <div v-show=\"carts?.carts?.length === 0\" class=\"empty-cart mb-20\">\n    <h3 class=\"text-title text-c-forthary text-center mb-4\">購物車是空的</h3>\n    <router-link to=\"/product\">\n      <button class=\"user-btn user-btn-primary mx-auto py-4 px-10 f-size-s\">前往選購商品</button>\n    </router-link>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      isLoading: false,\n      carts: [],\n      coupon: ''\n    }\n  },\n  methods: {\n    getCarts () {\n      this.isLoading = true\n      this.$http\n        .get(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.isLoading = false\n          this.carts = res.data.data\n          if (this.carts.carts.length === 0) {\n            this.$emitter.emit('changeBar', 0)\n            this.$emitter.emit('updateCart', res.data.data)\n            return\n          }\n          this.$emitter.emit('updateCart', res.data.data)\n          this.$emitter.emit('changeBar', 1)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    updateCart (item, qty) {\n      this.isLoading = true\n      const data = {\n        product_id: item.product_id,\n        qty: qty\n      }\n      this.$http\n        .put(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, { data })\n        .then((res) => {\n          this.getCarts()\n        })\n        .catch((err) => {\n          console.dir(err)\n        })\n    },\n    deleteCart (id) {\n      this.isLoading = true\n      this.$http\n        .delete(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\n        .then((res) => {\n          this.getCarts()\n        })\n        .catch((err) => {\n          console.dir(err)\n        })\n    },\n    useCoupon () {\n      if (this.coupon === '') {\n        alert('欄位不可為空')\n        return\n      }\n      this.isLoading = true\n      const data = {\n        code: this.coupon\n      }\n      this.$http\n        .post(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/coupon`, { data })\n        .then((res) => {\n          this.getCarts()\n        })\n        .catch((err) => {\n          console.dir(err)\n        })\n    },\n    routerTo () {\n      this.$router.push({ name: '資料輸入頁面', params: { show: true } })\n    }\n  },\n  mounted () {\n    this.getCarts()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .cart{\n    &-title{\n      padding: 5% 0;\n    }\n    .img-bg{\n      background-size: cover;\n      background-position: center center;\n      flex: 0 0 30%;\n    }\n    select{\n      width: 100%;\n      text-align: center;\n      &:focus{\n        outline: none;\n      }\n    }\n  }\n</style>\n","import { render } from \"./PayView1.vue?vue&type=template&id=6c7ff6c2&scoped=true\"\nimport script from \"./PayView1.vue?vue&type=script&lang=js\"\nexport * from \"./PayView1.vue?vue&type=script&lang=js\"\n\nimport \"./PayView1.vue?vue&type=style&index=0&id=6c7ff6c2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/ginjack/Desktop/vue-week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c7ff6c2\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_16","_createVNode","_component_LoadingView","active","$data","carts","length","_createElementBlock","_hoisted_2","_Fragment","_renderList","item","key","id","style","backgroundImage","product","imageUrl","_toDisplayString","title","unit","_hoisted_6","content","name","qty","$event","onChange","$options","value","_hoisted_9","price","total","type","onClick","_hoisted_19","readonly","final_total","disabled","_hoisted_27","_hoisted_28","_hoisted_30","_hoisted_33","Math","round","_hoisted_37","_hoisted_40","_component_router_link","to","_hoisted_41","data","isLoading","coupon","methods","getCarts","this","$http","get","then","res","$emitter","emit","catch","err","console","log","updateCart","product_id","put","dir","deleteCart","delete","useCoupon","alert","code","post","routerTo","$router","push","params","show","mounted","__exports__","render"],"sourceRoot":""}